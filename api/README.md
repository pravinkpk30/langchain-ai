# LangChain API with Google Gemini

This project demonstrates a LangChain-based API server using Google's Gemini model, along with a Streamlit-based web client. The server provides endpoints for generating essays and poems, while the client provides a user-friendly interface to interact with these endpoints.

## Tech Stack

- **Backend**: FastAPI
- **AI Model**: Google Gemini (via LangChain)
- **Frontend**: Streamlit
- **API Documentation**: Swagger UI (automatically generated by FastAPI)
- **Environment Management**: python-dotenv

## Project Structure

```
api/
├── app.py          # FastAPI server with LangChain integration
├── client.py       # Streamlit web client
├── requirements.txt # Python dependencies
└── .env            # Environment variables (not committed to version control)
```

## Prerequisites

- Python 3.8+
- Google API key with access to Gemini models
- pip (Python package manager)

## Setup

1. **Clone the repository** (if not already done):
   ```bash
   git clone <repository-url>
   cd langchain-ai/api
   ```

2. **Create and activate a virtual environment**:
   ```bash
   python -m venv venv
   source venv/bin/activate  # On Windows: venv\Scripts\activate
   ```

3. **Install dependencies**:
   ```bash
   pip install -r requirements.txt
   ```

4. **Create a `.env` file** in the `api` directory with your API key:
   ```
   GOOGLE_API_KEY=your_google_api_key_here
   ```

## Running the Application

### 1. Start the API Server

In one terminal window, run:
```bash
python app.py
```

This will start the FastAPI server at `http://localhost:8000`

### 2. Start the Streamlit Client

In another terminal window (with the same virtual environment activated), run:
```bash
streamlit run client.py
```

This will start the Streamlit client at `http://localhost:8501`

## How It Works

### app.py (API Server)
- **Purpose**: Serves as the backend API that processes requests using Google's Gemini model
- **Endpoints**:
  - `POST /essay`: Generates an essay on the given topic
  - `POST /poem`: Generates a child-friendly poem on the given topic
- **Documentation**: Available at `http://localhost:8000/docs`

### client.py (Streamlit Client)
- **Purpose**: Provides a simple web interface to interact with the API
- **Features**:
  - Input fields for essay and poem topics
  - Generate buttons for each type of content
  - Displays the generated content directly in the browser

## API Usage

You can also interact with the API directly using tools like `curl` or any HTTP client:

```bash
# Generate an essay
curl -X POST "http://localhost:8000/essay/invoke" \
     -H "Content-Type: application/json" \
     -d '{"input": {"topic": "artificial intelligence"}}'

# Generate a poem
curl -X POST "http://localhost:8000/poem/invoke" \
     -H "Content-Type: application/json" \
     -d '{"input": {"topic": "dinosaurs"}}'
```

## Response Format

The API returns responses in the following format:
```json
{
  "output": {
    "content": "Generated text will appear here...",
    "type": "ai"
  },
  "metadata": {
    "run_id": "unique-run-id-here"
  }
}
```

## Environment Variables

- `GOOGLE_API_KEY`: Your Google API key with access to Gemini models

## Troubleshooting

1. **API Key Issues**:
   - Ensure your Google API key is valid and has access to the Gemini API
   - Verify the key is correctly set in the `.env` file

2. **Port Conflicts**:
   - If port 8000 or 8501 is in use, you may need to stop the conflicting process or change the ports in the respective files

3. **Dependency Issues**:
   - Make sure all dependencies are installed correctly using `pip install -r requirements.txt`
   - If you encounter version conflicts, try creating a fresh virtual environment

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## Acknowledgements

- [LangChain](https://python.langchain.com/) for the LLM framework
- [Google Gemini](https://ai.google.dev/) for the language model
- [FastAPI](https://fastapi.tiangolo.com/) for the web framework
- [Streamlit](https://streamlit.io/) for the web interface
